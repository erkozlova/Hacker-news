(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{76:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n(25),s=n.n(i),o=n(20),l=n(108),d=(n(76),n(9)),p=n(100),u=n(112),j=n(102),b=n(103),m=n(101),h=n(59),x=n.n(h),O=n(23),f=n.n(O),g=n(37),y=n(30),v={baseUrl:" https://hacker-news.firebaseio.com/v0",headers:{"Content-type":"application/json"}},k=function(e){return fetch(v.baseUrl+"/item/".concat(e,".json?print=pretty"),{headers:v.headers}).then((function(e){return e.json()}))},w=function(e){return fetch(v.baseUrl+"/item/".concat(e,".json?print=pretty"),{headers:v.headers}).then((function(e){return e.json()}))},N="GET_LIST_REQUEST",E="GET_LIST_SUCCESS",S="GET_LIST_FAILED",C="GET_LIST_PROCESS",T="GET_ITEM_SUCCESS",L="GET_ITEM_FAILED",_="GET_ITEM_REQUEST",I="GET_COMMENTS_SUCCESS",M="GET_COMMENTS_FAILED",U="GET_COMMENTS_REQUEST",z="GET_ITEM_COMMENTS_SUCCESS",G="GET_ITEM_COMMENTS_FAILED",R="GET_ITEM_COMMENTS_REQUEST",P=n(4),D=function(e){return function(){var t=Object(y.a)(f.a.mark((function t(n){var a,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:R}),t.prev=1,t.next=4,k(e);case 4:if(a=t.sent,Object.keys(a).length){t.next=7;break}throw new Error("Not found");case 7:if(!a.kids||!a.kids.length){t.next=16;break}return n({type:U}),t.next=11,Promise.all(a.kids.map((function(e){return w(e)})));case 11:if((r=t.sent)&&r.length){t.next=14;break}throw new Error("Not found");case 14:c=r.reduce((function(e,t){return e[t.id]=Object(P.a)(Object(P.a)({},t),{},{comments:{},path:[t.id]}),e}),{}),n({type:I,payload:{data:c,path:[]}});case 16:return t.abrupt("return",n({type:z,payload:a}));case 19:return t.prev=19,t.t0=t.catch(1),t.abrupt("return",n({type:G}));case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(e){return t.apply(this,arguments)}}()},F=n(26),B=n(53),A={data:[],isLoading:!1,loadingProcess:0},J={data:null,isLoading:!1},Q={data:null,isLoading:!1},H=function e(t,n,a){if(!a.length)return n;var r=JSON.parse(JSON.stringify(t||{}));if(a.length>1){var c=r[a[0]];c.comments=e(c.comments,n,a.slice(1))}else r[a[0]].comments=n;return r},W=Object(F.combineReducers)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!0});case C:return Object(P.a)(Object(P.a)({},e),{},{loadingProcess:e.loadingProcess+1});case E:return Object(P.a)(Object(P.a)({},e),{},{data:t.payload,isLoading:!1,loadingProcess:0});case S:return Object(P.a)(Object(P.a)({},e),{},{data:[],isLoading:!1});default:return e}},item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!0});case T:return Object(P.a)(Object(P.a)({},e),{},{data:t.payload,isLoading:!1});case L:return Object(P.a)(Object(P.a)({},e),{},{data:null,isLoading:!1});case R:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!0});case z:return Object(P.a)(Object(P.a)({},e),{},{data:t.payload,isLoading:!1});case G:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!1});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!0});case I:var n=H(e.data,t.payload.data,t.payload.path);return Object(P.a)(Object(P.a)({},e),{},{data:n,isLoading:!1});case M:return Object(P.a)(Object(P.a)({},e),{},{data:{},isLoading:!1});default:return e}}}),q=n(54),K=Object(F.createStore)(W,Object(B.composeWithDevTools)(Object(F.applyMiddleware)(q.a))),V=c.c,X=n(2),Y=Object(p.a)((function(e){return{refresh:{width:"40px",height:"40px",color:e.palette.secondary.dark},back:{color:e.palette.primary.dark,backgroundColor:e.palette.secondary.dark,borderRadius:"4px"}}})),Z=function(e){var t=e.handleUpdate,n=Y(),r=Object(c.b)(),i=Object(d.f)().pathname,s=V((function(e){var t;return null===(t=e.item.data)||void 0===t?void 0:t.id})),o=Object(a.useCallback)((function(e){r(D(e))}),[r]);return Object(X.jsx)(m.a,{edge:"end","aria-label":"refresh",onClick:function(){"/"===i?t():o(s)},children:Object(X.jsx)(x.a,{className:n.refresh})})},$=Object(p.a)((function(e){return{appbar:{backgroundColor:e.palette.primary.dark},root:{display:"flex",justifyContent:"space-between"},logo:{color:e.palette.secondary.dark},link:{textDecoration:"none"}}})),ee=function(e){var t=e.handleUpdate,n=$();return Object(X.jsx)("section",{children:Object(X.jsx)(u.a,{position:"static",className:n.appbar,children:Object(X.jsxs)(j.a,{variant:"dense",className:n.root,children:[Object(X.jsx)(b.a,{variant:"h4",className:n.logo,children:Object(X.jsx)(o.b,{to:"/",className:n.link,children:"News"})}),Object(X.jsx)(Z,{handleUpdate:t})]})})})},te=n(106),ne=n(12),ae=n(110),re=n(104),ce=Object(p.a)((function(e){return{box:{width:"25vh",height:"25vh"},percent:Object(ne.a)({fontSize:"55px",color:e.palette.secondary.main},e.breakpoints.down("xs"),{fontSize:"44px"}),circle:{color:e.palette.secondary.dark}}})),ie=function(e){var t=ce();return Object(X.jsxs)(ae.a,{position:"relative",display:"inline-flex",className:t.box,children:[Object(X.jsx)(re.a,{variant:"determinate",value:e.loadingProcess,className:t.circle,size:"100%"}),Object(X.jsx)(ae.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(X.jsx)(b.a,{component:"span",color:"textSecondary",className:t.percent,children:"".concat(e.loadingProcess,"%")})})]})},se=n(105),oe=n(109),le=function(e){return Object(oe.a)(new Date(1e3*e),"MM.dd k:mm")},de=Object(p.a)((function(e){var t;return{container:{backgroundColor:e.palette.secondary.main,marginBottom:"10px",padding:"15px",borderRadius:"5px"},title:(t={},Object(ne.a)(t,e.breakpoints.down("sm"),{fontSize:"18px"}),Object(ne.a)(t,e.breakpoints.down("xs"),{fontSize:"14px"}),t),time:Object(ne.a)({},e.breakpoints.down("xs"),{fontSize:"12px"})}})),pe=function(e){var t=e.item,n=de();return Object(X.jsx)("article",{className:n.container,children:Object(X.jsxs)(se.a,{container:!0,spacing:2,children:[Object(X.jsx)(se.a,{item:!0,xs:1,container:!0,alignItems:"center",justify:"center",children:Object(X.jsx)(b.a,{component:"span",children:t.score})}),Object(X.jsxs)(se.a,{item:!0,xs:9,children:[Object(X.jsx)(b.a,{variant:"h5",className:n.title,gutterBottom:!0,children:t.title}),Object(X.jsx)(b.a,{variant:"subtitle2",children:"Author: ".concat(t.by)})]}),Object(X.jsx)(se.a,{item:!0,xs:2,container:!0,alignItems:"center",justify:"center",children:Object(X.jsx)(b.a,{component:"span",className:n.time,children:le(t.time)})})]})})},ue=Object(p.a)((function(e){return{sectionLoader:{display:"grid",placeItems:"center",height:"100vh"},sectionNews:{display:"flex",justifyContent:"center"},sectionNotFound:{display:"flex",justifyContent:"center"},title:{width:"1000px",height:"100px",margin:"0 auto",borderRadius:"5px",backgroundColor:e.palette.secondary.main},list:{padding:"0",marginTop:"20px"},notFound:{marginTop:"100px",color:e.palette.secondary.main},link:{textDecoration:"none",color:"#000"}}})),je=function(e){var t=e.handleUpdate,n=ue(),r=V((function(e){return e.list.isLoading})),c=V((function(e){return e.list.data})),i=V((function(e){return e.list.loadingProcess}));return Object(a.useEffect)((function(){var e=setInterval((function(){t()}),6e4);return t(),function(){clearInterval(e)}}),[t]),r?Object(X.jsx)("section",{className:n.sectionLoader,children:Object(X.jsx)(ie,{loadingProcess:i})}):c.length?Object(X.jsx)("section",{className:n.sectionNews,children:Object(X.jsx)(te.a,{children:Object(X.jsx)("ul",{className:n.list,children:c.map((function(e){return Object(X.jsx)(o.b,{to:"/".concat(e.id),className:n.link,children:Object(X.jsx)(pe,{item:e})},e.id)}))})})}):Object(X.jsx)("section",{className:n.sectionNotFound,children:Object(X.jsx)(b.a,{variant:"h2",className:n.notFound,children:"Not found"})})},be=n(60),me=n(107),he=Object(p.a)((function(e){return{commentContainer:{marginLeft:"20px"},comment:{marginBottom:"20px",width:"100%"},wrapper:{display:"flex",marginBottom:"10px"},author:{marginRight:"10px"},time:{display:"flex",alignItems:"center"},button:{marginTop:"10px"}}})),xe=function e(t){var n=t.comment,r=t.handleGetComments,c=he(),i=Object(a.useCallback)((function(){r(n.kids,n.path)}),[r,n]);return n.deleted?Object(X.jsx)("li",{className:c.commentContainer,children:Object(X.jsx)(b.a,{variant:"h6",component:"h4",color:"textSecondary",children:"This comment was deleted"})}):Object(X.jsxs)("li",{className:c.commentContainer,children:[Object(X.jsxs)("div",{className:c.comment,children:[Object(X.jsxs)("div",{className:c.wrapper,children:[Object(X.jsx)(b.a,{variant:"h6",component:"span",className:c.author,children:"Author: ".concat(n.by)}),Object(X.jsx)(b.a,{variant:"h6",component:"span",className:c.time,children:le(n.time)})]}),Object(X.jsx)(b.a,{variant:"body1",component:"p",dangerouslySetInnerHTML:{__html:n.text}}),n.kids&&Object(be.isEmpty)(n.comments)&&Object(X.jsx)(me.a,{variant:"contained",color:"primary",className:c.button,onClick:i,children:"See more comments"})]}),Object(X.jsx)("ul",{children:Object.values(n.comments).map((function(t){return Object(X.jsx)(e,{comment:t,handleGetComments:r},t.id)}))})]})},Oe=Object(p.a)((function(e){var t;return{sectionLoader:{display:"grid",placeItems:"center",height:"100vh"},circle:{color:e.palette.secondary.dark,width:"25vh",height:"25vh"},main:{margin:"50px 0",boxSizing:"border-box",padding:"10px",width:"100%",display:"flex",flexDirection:"column",backgroundColor:e.palette.secondary.main,borderRadius:"6px"},wrapper_title:{display:"flex",alignItems:"center",marginTop:"30px"},rating:Object(ne.a)({width:"42px",height:"42px",marginLeft:"30px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.secondary.dark,borderRadius:"50%"},e.breakpoints.down("md"),{width:"30px",height:"30px"}),score:Object(ne.a)({fontSize:"20px"},e.breakpoints.down("md"),{fontSize:"14px"}),title:(t={width:"90%",marginLeft:"30px"},Object(ne.a)(t,e.breakpoints.down("sm"),{fontSize:"40px"}),Object(ne.a)(t,e.breakpoints.down("xs"),{fontSize:"20px"}),t),learnMoreLink:Object(ne.a)({color:e.palette.secondary.dark,marginLeft:"102px"},e.breakpoints.down("sm"),{marginLeft:"80px",fontSize:"15px"}),subtitle_container:{marginTop:"30px",marginBottom:"30px",display:"flex",justifyContent:"space-between"},wrapper_subtitle:{display:"flex"},author:Object(ne.a)({marginRight:"20px",display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{fontSize:"15px"}),time:Object(ne.a)({marginRight:"20px",display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{fontSize:"15px"}),comments:Object(ne.a)({marginLeft:"60px",marginBottom:"20px"},e.breakpoints.down("sm"),{fontSize:"30px"}),list:{padding:"0 60px",listStyleType:"none"},noComments:{marginLeft:"102px",marginBottom:"30px"}}})),fe=function(){var e=Object(d.g)().id,t=Oe(),n=Object(c.b)(),r=V((function(e){return e.item.data})),i=V((function(e){return e.comments.data})),s=V((function(e){return e.item.isLoading})),o=Object(a.useCallback)((function(e){n(D(e))}),[n]),l=Object(a.useCallback)((function(e,t){n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){var n=Object(y.a)(f.a.mark((function n(a){var r,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a({type:U}),n.prev=1,e.length){n.next=4;break}throw new Error("Not found");case 4:return n.next=6,Promise.all(e.map((function(e){return w(e)})));case 6:if((r=n.sent).length){n.next=9;break}throw new Error("Not found");case 9:return c=r.reduce((function(e,n){return e[n.id]=Object(P.a)(Object(P.a)({},n),{},{comments:{},path:[].concat(Object(g.a)(t),[n.id])}),e}),{}),n.abrupt("return",a({type:I,payload:{data:c,path:t}}));case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",a({type:M}));case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}),[n]);return Object(a.useEffect)((function(){o(Number(e))}),[o,e]),Object(a.useEffect)((function(){var t=setInterval((function(){o(Number(e))}),6e4);return function(){clearInterval(t)}}),[e,o]),s?Object(X.jsx)("section",{className:t.sectionLoader,children:Object(X.jsx)(re.a,{size:"25vh",className:t.circle})}):r?Object(X.jsx)(te.a,{children:Object(X.jsxs)("main",{className:t.main,children:[Object(X.jsxs)("div",{className:t.wrapper_title,children:[Object(X.jsx)(ae.a,{className:t.rating,children:Object(X.jsx)(b.a,{component:"span",className:t.score,children:r.score})}),Object(X.jsx)(b.a,{variant:"h2",component:"h2",className:t.title,children:r.title})]}),Object(X.jsxs)("div",{className:t.subtitle_container,children:[Object(X.jsx)(b.a,{variant:"h5",component:"span",className:t.learnMoreLink,children:Object(X.jsx)("a",{href:r.url,children:"Learn more"})}),Object(X.jsxs)("div",{className:t.wrapper_subtitle,children:[Object(X.jsx)(b.a,{variant:"h5",component:"span",className:t.author,children:"Author: ".concat(r.by)}),Object(X.jsx)(b.a,{variant:"h5",component:"span",className:t.time,children:le(r.time)})]})]}),i&&r.kids?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(b.a,{variant:"h4",component:"h3",className:t.comments,children:["Comments(",r.kids.length,"):"]}),Object(X.jsx)("ul",{className:t.list,children:r.kids.map((function(e){return Object(X.jsx)(xe,{comment:i[e],handleGetComments:l},i[e].id)}))})]}):Object(X.jsx)(b.a,{variant:"h4",component:"p",className:t.noComments,children:"There are no comments yet"})]})}):null},ge=Object(p.a)((function(e){return{app:{minHeight:"100vh"}}})),ye=function(){var e=Object(c.b)(),t=ge(),n=Object(a.useCallback)((function(){e(function(){var e=Object(y.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:N}),e.prev=1,e.next=4,fetch(v.baseUrl+"/newstories.json?print=pretty",{headers:v.headers}).then((function(e){return e.json()}));case 4:if((n=e.sent)&&n.length){e.next=7;break}throw new Error("Not found");case 7:return a=n.slice(0,100),e.next=10,Promise.all(a.reduce((function(e,n){var a=k(n).then((function(e){return t({type:C}),e}));return[].concat(Object(g.a)(e),[a])}),[]));case 10:return r=e.sent,c=r.reduce((function(e,t){return t?[].concat(Object(g.a)(e),[t]):e}),[]),e.abrupt("return",t({type:E,payload:c}));case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",t({type:S}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);return Object(X.jsxs)("div",{className:t.app,children:[Object(X.jsx)(ee,{handleUpdate:n}),Object(X.jsxs)(d.c,{children:[Object(X.jsx)(d.a,{exact:!0,path:"/",children:Object(X.jsx)(je,{handleUpdate:n})}),Object(X.jsx)(d.a,{path:"/:id",children:Object(X.jsx)(fe,{})})]})]})},ve=n(61),ke=Object(ve.a)({palette:{primary:{main:"#314e52",dark:"#263f44"},secondary:{main:"#fff1cf",dark:"#f2a154"}}});s.a.render(Object(X.jsx)(r.a.StrictMode,{children:Object(X.jsx)(o.a,{basename:"/Hacker-news",children:Object(X.jsx)(c.a,{store:K,children:Object(X.jsx)(l.a,{theme:ke,children:Object(X.jsx)(ye,{})})})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.e0cbbbab.chunk.js.map